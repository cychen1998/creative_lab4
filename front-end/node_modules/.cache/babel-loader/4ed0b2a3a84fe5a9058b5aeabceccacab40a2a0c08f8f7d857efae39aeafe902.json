{"ast":null,"code":"import _regeneratorRuntime from\"/usr/share/caddy/creative_lab4/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/usr/share/caddy/creative_lab4/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/share/caddy/creative_lab4/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component}from'react';import{useState,useEffect}from'react';import axios from'axios';import'../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){// setup state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),quantity=_useState8[0],setQuantity=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),ingredients=_useState10[0],setIngredients=_useState10[1];var fetchRecipes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/user/recipes\");case 3:response=_context.sent;setRecipes(response.data.recipes);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setError(\"error retrieving recipes: \"+_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchRecipes(){return _ref.apply(this,arguments);};}();var createRecipe=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/user/recipes\",{name:name,quantity:quantity,ingredients:ingredients});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);setError(\"error adding a recipe: \"+_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function createRecipe(){return _ref2.apply(this,arguments);};}();var deleteOneRecipe=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(recipe){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/user/recipes/\"+recipe.id);case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);setError(\"error deleting a recipe\"+_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function deleteOneRecipe(_x){return _ref3.apply(this,arguments);};}();// fetch ticket data\nuseEffect(function(){fetchRecipes();},[]);var addRecipe=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();_context4.next=3;return createRecipe();case 3:fetchRecipes();setName(\"\");setQuantity();setIngredients(\"\");case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function addRecipe(_x2){return _ref4.apply(this,arguments);};}();var deleteRecipe=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(recipe){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return deleteOneRecipe(recipe);case 2:fetchRecipes();case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function deleteRecipe(_x3){return _ref5.apply(this,arguments);};}();// render results\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[error,/*#__PURE__*/_jsx(\"h1\",{children:\"Create a Recipe\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addRecipe,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Quantity:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quantity,onChange:function onChange(e){return setQuantity(parseInt(e.target.value));}})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Ingredients:\",/*#__PURE__*/_jsx(\"textarea\",{value:ingredients,onChange:function onChange(e){return setIngredients(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Recipes\"}),recipes.map(function(recipe){return/*#__PURE__*/_jsxs(\"div\",{className:\"recipe\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ingredient\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[recipe.name,\"\\u2003\",recipe.quantity]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:recipe.ingredients})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return deleteRecipe(recipe);},children:\"Delete\"})]},recipe.id);})]});}export default Home;","map":{"version":3,"names":["React","Component","useState","useEffect","axios","Home","recipes","setRecipes","error","setError","name","setName","quantity","setQuantity","ingredients","setIngredients","fetchRecipes","get","response","data","createRecipe","post","deleteOneRecipe","recipe","delete","id","addRecipe","e","preventDefault","deleteRecipe","target","value","parseInt","map"],"sources":["/usr/share/caddy/creative_lab4/front-end/src/components/home.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../App.css';\n\nfunction Home() {\n\n     // setup state\n  const [recipes, setRecipes] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [quantity, setQuantity] = useState();\n  const [ingredients, setIngredients] = useState(\"\");\n\n  const fetchRecipes = async() => {\n    try {      \n      const response = await axios.get(\"/user/recipes\");\n      setRecipes(response.data.recipes);\n    } catch(error) {\n      setError(\"error retrieving recipes: \" + error);\n    }\n  }\n  const createRecipe = async() => {\n    try {\n      await axios.post(\"/user/recipes\", {name: name, quantity: quantity, ingredients: ingredients});\n    } catch(error) {\n      setError(\"error adding a recipe: \" + error);\n    }\n  }\n  const deleteOneRecipe = async(recipe) => {\n    try {\n      await axios.delete(\"/user/recipes/\" + recipe.id);\n    } catch(error) {\n      setError(\"error deleting a recipe\" + error);\n    }\n  }\n\n  // fetch ticket data\n  useEffect(() => {\n    fetchRecipes();\n  },[]);\n\n  const addRecipe = async(e) => {\n    e.preventDefault();\n    await createRecipe();\n    fetchRecipes();\n    setName(\"\");\n    setQuantity();\n    setIngredients(\"\");\n  }\n\n  const deleteRecipe = async(recipe) => {\n    await deleteOneRecipe(recipe);\n    fetchRecipes();\n  }\n\n  // render results\n  return (\n    <div className=\"App\">\n      {error}\n      <h1>Create a Recipe</h1>\n      <form onSubmit={addRecipe}>\n        <div>\n          <label>\n            Name:\n            <input type=\"text\" value={name} onChange={e => setName(e.target.value)} />\n          </label>\n        </div>\n        <div>\n          <label>\n            Quantity:\n            <input type=\"number\" value={quantity} onChange={e => setQuantity(parseInt(e.target.value))} />\n          </label>\n        </div>\n        <div>\n          <label>\n            Ingredients:\n            <textarea value={ingredients} onChange={e => setIngredients(e.target.value)}></textarea>\n          </label>\n        </div>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n      <h1>Recipes</h1>\n      {recipes.map( recipe => (\n        <div key={recipe.id} className=\"recipe\">\n          <div className=\"ingredient\">\n            <p>{recipe.name}&emsp;{recipe.quantity}</p>\n            <p><i>{recipe.ingredients}</i></p>\n          </div>\n          <button onClick={e => deleteRecipe(recipe)}>Delete</button>\n        </div>\n      ))}     \n    </div>\n  );\n}\n\nexport default Home\n"],"mappings":"0YAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAO,YAAY,CAAC,wFAEpB,QAASC,KAAI,EAAG,CAEX;AACH,cAA8BH,QAAQ,CAAC,EAAE,CAAC,wCAAnCI,OAAO,eAAEC,UAAU,eAC1B,eAA0BL,QAAQ,CAAC,EAAE,CAAC,yCAA/BM,KAAK,eAAEC,QAAQ,eACtB,eAAwBP,QAAQ,CAAC,EAAE,CAAC,yCAA7BQ,IAAI,eAAEC,OAAO,eACpB,eAAgCT,QAAQ,EAAE,yCAAnCU,QAAQ,eAAEC,WAAW,eAC5B,eAAsCX,QAAQ,CAAC,EAAE,CAAC,0CAA3CY,WAAW,gBAAEC,cAAc,gBAElC,GAAMC,aAAY,4FAAG,wLAEMZ,MAAK,CAACa,GAAG,CAAC,eAAe,CAAC,QAA3CC,QAAQ,eACdX,UAAU,CAACW,QAAQ,CAACC,IAAI,CAACb,OAAO,CAAC,CAAC,+EAElCG,QAAQ,CAAC,4BAA4B,YAAQ,CAAC,CAAC,oEAElD,kBAPKO,aAAY,0CAOjB,CACD,GAAMI,aAAY,6FAAG,kLAEXhB,MAAK,CAACiB,IAAI,CAAC,eAAe,CAAE,CAACX,IAAI,CAAEA,IAAI,CAAEE,QAAQ,CAAEA,QAAQ,CAAEE,WAAW,CAAEA,WAAW,CAAC,CAAC,0FAE7FL,QAAQ,CAAC,yBAAyB,aAAQ,CAAC,CAAC,qEAE/C,kBANKW,aAAY,2CAMjB,CACD,GAAME,gBAAe,6FAAG,kBAAMC,MAAM,gKAE1BnB,MAAK,CAACoB,MAAM,CAAC,gBAAgB,CAAGD,MAAM,CAACE,EAAE,CAAC,0FAEhDhB,QAAQ,CAAC,yBAAyB,aAAQ,CAAC,CAAC,qEAE/C,kBANKa,gBAAe,6CAMpB,CAED;AACAnB,SAAS,CAAC,UAAM,CACda,YAAY,EAAE,CAChB,CAAC,CAAC,EAAE,CAAC,CAEL,GAAMU,UAAS,6FAAG,kBAAMC,CAAC,wHACvBA,CAAC,CAACC,cAAc,EAAE,CAAC,uBACbR,aAAY,EAAE,QACpBJ,YAAY,EAAE,CACdL,OAAO,CAAC,EAAE,CAAC,CACXE,WAAW,EAAE,CACbE,cAAc,CAAC,EAAE,CAAC,CAAC,wDACpB,kBAPKW,UAAS,8CAOd,CAED,GAAMG,aAAY,6FAAG,kBAAMN,MAAM,+IACzBD,gBAAe,CAACC,MAAM,CAAC,QAC7BP,YAAY,EAAE,CAAC,wDAChB,kBAHKa,aAAY,8CAGjB,CAED;AACA,mBACE,aAAK,SAAS,CAAC,KAAK,WACjBrB,KAAK,cACN,uCAAwB,cACxB,cAAM,QAAQ,CAAEkB,SAAU,wBACxB,kCACE,8CAEE,cAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEhB,IAAK,CAAC,QAAQ,CAAE,kBAAAiB,CAAC,QAAIhB,QAAO,CAACgB,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,EAAC,EAAG,GACpE,EACJ,cACN,kCACE,kDAEE,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAEnB,QAAS,CAAC,QAAQ,CAAE,kBAAAe,CAAC,QAAId,YAAW,CAACmB,QAAQ,CAACL,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,EAAC,EAAG,GACxF,EACJ,cACN,kCACE,qDAEE,iBAAU,KAAK,CAAEjB,WAAY,CAAC,QAAQ,CAAE,kBAAAa,CAAC,QAAIZ,eAAc,CAACY,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,EAAC,EAAY,GAClF,EACJ,cACN,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAG,GACjC,cACP,+BAAgB,CACfzB,OAAO,CAAC2B,GAAG,CAAE,SAAAV,MAAM,qBAClB,aAAqB,SAAS,CAAC,QAAQ,wBACrC,aAAK,SAAS,CAAC,YAAY,wBACzB,qBAAIA,MAAM,CAACb,IAAI,UAAQa,MAAM,CAACX,QAAQ,GAAK,cAC3C,gCAAG,mBAAIW,MAAM,CAACT,WAAW,EAAK,EAAI,GAC9B,cACN,eAAQ,OAAO,CAAE,iBAAAa,CAAC,QAAIE,aAAY,CAACN,MAAM,CAAC,EAAC,oBAAgB,GALnDA,MAAM,CAACE,EAAE,CAMb,EACP,CAAC,GACE,CAEV,CAEA,cAAepB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}